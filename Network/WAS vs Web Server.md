# WAS vs Web Server

## 웹 서버 (Web Server)

> 클라이언트가 요청한 정적인 콘텐츠를 HTTP를 통해 제공해주는 서버 

- **정적인 콘텐츠 제공**이 가장 큰 역할

- 동적인 요청이 클라이언트로부터 들어왔을 때, 해당 요청을 웹 서버에서 처리할 수 없어 **컨테이너**로 보내준다.

- 예) `NginX, Appach`


</br>

> **정적 페이지(Static Page)** 
>
> 데이터 베이스에서 정보를 가져오거나 별도의 서버 처리가 없어도, 사용자들에게 보여줄 수 있는 페이지 => 모든 사용자에게 동일한 페이지를 보여줌
>
> 예) `html, Css, image`
>
> **동적 페이지(Dynamic Page)**
>
> 어떤 요청에 의해 서버가 일을 수행하고 해당 결과가 포함된 파일을 보여주는 페이지 => 사용자들마다 다른페이지를 볼 수 있음
>
> 예) `DB조회`

</br>

## 컨테이너 (Container)

> 동적인 데이터들을 처리하여 정적인 페이지로 생성해주는 소프트웨어 모듈

사용자가 로그인해서 My Page 메뉴에 들어간다고 가정해보겠습니다. 이 메뉴에서는 각자 사용자에 따라 보여질 정보가 다릅니다. 사용자의 요청이 들어오면 웹 서버는 정적인 요소만 클라이언트 측에 보낼 수 있고, 동적으로 처리해야 하는 부분은 처리할 수 없습니다. **컨테이너는 이러한 부분을 대신 처리해서 웹 서버에 정적인 파일로 만들어서 보내주는 모듈**이라고 생각하면 될 것 같습니다.

</br>

클라이언트 측에서 크롬 개발자 도구를 이용하여 파일을 살펴보면 php, ejs 파일도 만든 소스코드도 전부 **html로 전송**됩니다. 이는 해당 파일에서 **처리해야할 부분을 처리하고 정적 파일로 만든 후에 클라이언트에게 보냈다**고 생각하면 좋을 것 같습니다. php 나 js 코드 등으로 처리한 코드 부분도 클라이언트 측에서는 볼 수 없습니다.

자바 기반의 서버에서는 `서블릿(Servlet)`이라는 용어도 많이 사용하는 것 같습니다.

</br>

## WAS (Web Application Server)

> 웹 서버로부터 오는 동적인 요청을 처리하는 서버로, 웹 서버와 컨테이너를 붙여놓은 서버라고 이해하면 됨

<img src="image\was.jpeg" alt="was" width="80%" height="80%" />

예를 들어서, 클라이언트에서 [http://caffelove.com](http://caffelove.com/) 이라는 도메인을 가진 서버에서 ‘내 정보’를 눌러 http://caffelove.com/myinfo 라는 경로에 들어간다고 가정해보겠습니다. 내 정보를 볼 수 있는 홈페이지라고 하겠습니다. 환경은 node.js 라고 가정하겠습니다.

/myinfo 라는 경로로 요청하면 WAS는 자신의 라우팅 정보를 통하여 어떤 처리를 해야될지 살펴봅니다. 이 때, myinfo를 라우팅 할 때, ‘myinfo.html 이라는 파일을 보여줘!’ 라는 요청을 하게 된다면 정적인 요소이기 때문에, 웹서버에서 클라이언트에게 myinfo.html 파일을 보내주기만 하면 됩니다. 관련된 Css, Js, Image 파일도 함께요.

하지만, myinfo는 자신의 정보를 보여주는 페이지이니 위처럼 반응하지 않겠죠. WAS에서는 대게 먼저 데이터베이스에서 데이터를 가져옵니다. 그 다음에 원하는 데이터를 가공하여, myinfo.ejs 파일로 해당 데이터를 보내줍니다. .ejs파일에서는 node.js 에서의 변수나 정보를 사용할 수 있게 만들어 놓았습니다. 정보를 넣어야 할 곳에 데이터베이스에서 가져온 정보를 넣고, ejs 파일을 html 로 바꿔준 다음에 웹서버로 전송합니다. (node.js 의 Javascript와 클라이언트의 UI를 동적으로 보여주는 Javascript는 다른 것이니 유의해서 봐주세요!)

웹 서버는 위의 html 요소를 클라이언트에게 다시 보내주는 것이죠. WAS에 `Tomcat, Jeus` 같은 것들이 있다고 합니다.

</br>

출처: http://melonicedlatte.com/web/2019/06/23/210300.html