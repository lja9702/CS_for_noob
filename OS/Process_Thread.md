# 프로세스(Process) vs 스레드(Thread)

## 프로세스 (Process)

> 메모리 상에서 실행중인 프로그램 작업

- 실행중인 프로그램을 Disk로 부터 메모리에 적재되어 CPU 할당을 받음
- 프로세스마다 최소 1개의 스레드(메인 스레드) 소유

### 프로그램(Program)과 프로세스(Process)

- 프로그램은 실행할 수 있는 파일(.exe)
- 프로세스는 메모리에 올라와 cpu를 할당받고 프로그램이 실행되고 있는 상태

</br>

### 프로세스 주소 공간

프로세스는 각각 별도의 주소공간을 할당한다. (독립적)

<img src="image\processAddrSpace.png" alt="processAddrSpace" width="50%" height="50%" />

* Code 영역: 코드 자체를 구성하는 메모리 영역 (프로그램 명령)

* Data 영역: 전역변수, 정적변수, 배열 등

* Heap 영역: 동적할당 시 사용 (new(), malloc() 등)

* Stack 영역: 지역변수, 매개변수, 리턴 값 (임시 메모리 영역)

</br>

## 스레드 (Thread)

> 프로세스 안에서 실행되는 여러 흐름 단위

- 스레드 ID, 프로그램 카운터(PC), 레지스터 집합, 스택으로 구성

- Code, Data, Heap은 공유한다

**프로세스는 자신만의 고유공간과 자원을 할당받는 반면,**
**스레드는 다른 스레드와 주소 공간/자원을 공유한다는 차이가 존재**

</br>

<img src="image\Thread.png" width="50%" height="50%"/>

</br>

### 싱글스레드 vs 멀티스레드

- **싱글스레드**: 하나의 스레드를 갖는 프로세스
- **멀티스레드**: 하나 이상의 스레드를 갖는 프로세스
  - 싱글코어일 때: 하나의 코어가 번갈아 가며 작업을 수행하기 때문에 작업이 겹치지 않는다.
  - 멀티코어일 때: 동시에 두 쓰레드가 수행될 수 있어 작업이 겹칠 수 있다. 따라서 **화면 (console)**이라는 자원을 놓고 두 쓰레드가 경쟁한다.

- 두개의 작업 a, b를 싱글스레드로 처리하는 경우와 2개의 스레드(멀티스레드)로 처리하는 경우를 가정해보자

  ***싱글스레드*** : 한 작업을 마친 후 다른 작업 수행

  ***멀티스레드*** : 짧은시간동안 2개의 스레드가 번갈아가며 작업을 수행해 (context switching) 동시에 두 작업이 처리되는 것 같게 느끼게 함 => context switching 비용으로 인해 작업시간이 더 오래걸림

> **병행(concurrent) vs 병렬(parallel)**
>
> 병행: 여러 쓰레드가 여러 작업을 동시에 진행
>
> 병렬: 하나의 작업을 여러 쓰레드가 나눠서 처리

</br>